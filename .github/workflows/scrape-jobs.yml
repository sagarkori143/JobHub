# name: Job Sync (Every 2 Hours)

# on:
#   schedule:
#     # Runs every 2 hours at minute 0
#     - cron: '0 */2 * * *'
#   workflow_dispatch: # Allows manual triggering from GitHub UI

# permissions:
#   contents: write

# jobs:
#   sync:
#     runs-on: ubuntu-latest
#     environment: Production

#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       - name: Set up Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'

#       - name: Install dependencies
#         run: npm install

#       - name: Create data directory
#         run: mkdir -p data logs

#       - name: Debug ENV
#         run: env | grep SUPABASE
#         env:
#           NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.NEXT_PUBLIC_SUPABASE_URL }}
#           SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}

#       - name: Run Job Sync
#         run: npm run scrape-jobs
#         env:
#           NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.NEXT_PUBLIC_SUPABASE_URL }}
#           SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}

#       - name: Commit and Push Changes
#         run: |
#           git config user.name "GitHub Actions Bot"
#           git config user.email "actions@github.com"
#           find data -name '*.json' -exec git add {} + || true
#           find logs -name '*.log' -exec git add {} + || true
#           git commit -m "Automated: Job sync completed - $(date)" || echo "No changes to commit"
#           git push
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
